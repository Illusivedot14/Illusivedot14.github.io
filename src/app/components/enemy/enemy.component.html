<div class="enemy">
    <div class ="back-button-container">
        <button class="back-button" mat-icon-button class="back-button" (click)="returnToPrior()">
            <img class="item-swap-button"
            src="https://raw.githubusercontent.com/sfarmani/twicons/master/GoBack.jpg"
            style="width:64px;height:64px;"
            alt="thumbnail"/>
        </button>
        <p class="back-button-label">Return to Prior Page</p>
    </div>
    <div class="enemy-container" *ngIf="enemy">
        <span class="enemy-name" [style.color]="enemy.color"> {{ enemy.name }}</span>
            <img class="enemy-thumbnail"
            src="{{getBossImageURL(enemy.name)}}"
            style="width:256px;height:256px;"
            alt="thumbnail"/>
        <span class="enemy-quote" *ngIf="enemy.quote"[style.color]="enemy.color">"{{ enemy.quote }}"</span>
    </div>

    <mat-tab-group class="enemy-tabs" mat-align-tabs="center" backgroundColor="primary" [selectedIndex]="0" dynamicHeight>
        <mat-tab label="Stats">
            <div class="enemy-details" *ngIf="enemy">
                <div class="enemy-basics">
                    <div class="enemy-card">
                        <img class="enemy-image"
                        src="{{getBossImageURL(enemy.name)}}"
                        style="width:168px;height:168px;"
                        alt="Body Image"/>
                        <div class="enemy-quick-details">
                            <span class="enemy-name-details"  *ngIf="enemy.name" [style.color]="enemy.color">{{ enemy.name }}</span>  
                            <div>
                                <span class="enemy-level">Lvl. {{ enemy.level }}&nbsp;</span> 
                                <span class="enemy-category" *ngIf="enemy.category">{{ enemy.category }}&nbsp;</span> 
                                <span class="enemy-type" *ngIf="enemy.type && enemy.type!='Mob'">{{ enemy.type }}&nbsp;</span> 
                            </div>
                            <p class="enemy-respawn"  *ngIf="enemy.respawn">Respawns: {{ enemy.respawn }}</p>
                            <p class="enemy-respawn"  *ngIf="enemy.timer">Respawns: Every {{ enemy.timer }} seconds</p>
                        </div>
                    </div>
                    <div class="enemy-difficulty" *ngIf="enemy.type == 'Boss' && enemy.category != 'Field' && enemy.category != 'Creep'">
                        <span class="enemy-difficulty-label" *ngIf='difficulty==1'>Difficulty: {{ difficulty }} Player</span>
                        <span class="enemy-difficulty-label" *ngIf='difficulty>1'>Difficulty: {{ difficulty }} Players</span>
                        <mat-slider min="1" max="10" step="1" value="1" (input)="onInputChange($event)"></mat-slider>
                    </div>
                    <mat-grid-list class ="enemy-stat-container" cols="4" rowHeight="4:2">
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/health.jpg"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-health" [style.color]="possibleStats['health'].color">
                                {{ getHealth() }} HP<br>({{ possibleStats['healthRegen'].value }} HP/s)
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/mana.jpg"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-mana" [style.color]="possibleStats['mana'].color">
                                {{ possibleStats['mana'].value }} MP<br>({{ possibleStats['manaRegen'].value }} MP/s)
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/attack.png"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-attack" [style.color]="possibleStats['attackDamage'].color">
                                {{ possibleStats['attackDamage'].value }} - {{ maxAttack }} ATK<br>({{ possibleStats['attackSpeed'].value}} ATK/s)
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/range.png"
                            style="width:96px;height:96px;"
                            alt="Armor Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-range" [style.color]="possibleStats['attackRange'].color">
                                {{ possibleStats['attackRange'].value }} Range
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/light.png"
                            alt="Armor Thumbnail"
                            style="width:96px;height:96px;"
                            *ngIf="possibleStats['armorType'].value=='Light'"/>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/medium.png"
                            alt="Armor Thumbnail"
                            style="width:96px;height:96px;"
                            *ngIf="possibleStats['armorType'].value=='Medium'"/>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/heavy.png"
                            alt="Armor Thumbnail"
                            style="width:96px;height:96px;"
                            *ngIf="possibleStats['armorType'].value=='Heavy'"/>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/hero.png"
                            alt="Armor Thumbnail"
                            style="width:96px;height:96px;"
                            *ngIf="possibleStats['armorType'].value=='Hero'"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-armor" [style.color]="possibleStats['armor'].color">
                                {{ possibleStats['armor'].value }} Armor
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/speed.png"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-moveSpeed" [style.color]="possibleStats['moveSpeed'].color">
                                {{ possibleStats['moveSpeed'].value }} Movespeed
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/magicResist.png"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-magicResist" [style.color]="possibleStats['magicResist'].color">
                                {{ possibleStats['magicResist'].value }}% Magic Defense
                            </span>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <img class="enemy-attribute-image"
                            src="../../../assets/img/damageResist.png"
                            style="width:96px;height:96px;"
                            alt="Health Thumbnail"/>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <span class="enemy-damageResist" [style.color]="possibleStats['damageResist'].color">
                                {{ possibleStats['damageResist'].value }}% Damage Defense
                            </span>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="enemy-notes-container" *ngIf='enemy.notes'>
                        <p class="enemy-notes-label">Notes</p>
                        <ng-container *ngFor="let line of enemy.notes">
                            <span class="enemy-note">※ {{ line }}</span>
                        </ng-container>
                    </div>
                </div>
                <div class="enemy-drop-container" *ngIf="enemy.drops">
                    <span class="enemy-drop-label">Drops (Max: {{ enemy.limit }})</span>
                    <ng-container *ngFor="let drop of enemy.drops">
                        <div class="enemy-drop">
                            <button mat-icon-button class="enemy-drop-button" (click)="openItemDetails(drop)">
                            <img src="{{ getItemImageURL(drop) }}"
                            alt="thumbnail"
                            style="width:96px;height:96px;"/>
                            </button>
                            <p class="enemy-drop-details"> {{ drop }} {{ getDropRateString(enemy, drop) }}</p>
                        </div>
                    </ng-container>
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Details">
            <div class="enemy-location" *ngIf="enemy.location">
                <div class="enemy-location-label">
                    <span >Location</span>
                    <span *ngIf="enemy.conditions"> and Conditions</span>
                </div>
                <mat-divider></mat-divider>
                <img class="enemy-location-image"
                src="{{ getLocationAsset(enemy.name) }}"
                alt="location-image"/>
                <span class="enemy-location-details">{{ enemy.location }}</span> 
                <span class="enemy-location-conditions" *ngIf="enemy.conditions">Requires: {{ enemy.conditions }}</span> 
                
            </div>
            <div class="enemy-spell-container" *ngIf="!hasGuide && enemy.spells">
                <span class="enemy-spell-label">Spells</span>
                <mat-divider></mat-divider>
                <mat-accordion class="enemy-spell-container">
                    <mat-expansion-panel hideToggle *ngFor="let spell of skills" style="background-color: #151515;width:1200px;align-self: center;">
                      <mat-expansion-panel-header style="height:100px">
                        <mat-panel-title class="enemy-spell-name">
                          {{spell.name}}
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                    <div class="enemy-spell">
                        <div class="enemy-spell-details">
                            <div class="enemy-spell-description" style="color:#ff8c00" *ngIf=spell.active>
                                <div class="enemy-spell-detail-label" style="color:#ff8c00" *ngIf=spell.active>Active</div>
                                <ng-container *ngFor="let line of spell.active">
                                    <span class="enemy-spell-active">❖ {{line}}<br></span>
                                </ng-container>
                            </div>
                            <div class="enemy-spell-description" style="color:#ff1493" *ngIf=spell.passive>
                                <div class="enemy-spell-detail-label" style="color:#ff1493" *ngIf=spell.passive>Passive</div>
                                <ng-container *ngFor="let line of spell.passive">
                                    <span class="enemy-spell-passive">⁘ {{line}}<br></span>
                                </ng-container>
                            </div>
                            <div class="enemy-spell-description" *ngIf=spell.trigger>
                                <div class="enemy-spell-detail-label" *ngIf=spell.trigger style="color:#8a2be2">Event</div>
                                <ng-container *ngFor="let line of spell.trigger">
                                    <span class="enemy-spell-trigger" style="color:#8a2be2">※ {{line}}<br></span>
                                </ng-container>
                            </div>
                            <ng-container *ngFor="let summon of spell.summons">
                                <button mat-icon-button class="enemy-summon-button" (click)="openEnemyDetails(summon)">
                                    <img class="enemy-button-image" src="{{ getBossImageURL(summon) }}"
                                    alt="thumbnail" style="width:100%"/>
                                    </button>
                            </ng-container>
                            <div style="margin-top: auto;">
                                <div class="enemy-spell-cost" *ngIf="spell.cost">
                                    <img/> Cost: {{spell.cost}} Resource
                                </div>
                                <div class="enemy-spell-cooldown" *ngIf="spell.cooldown">
                                    <img/> Cooldown: {{spell.cooldown}} second(s)
                                </div>
                            </div>

                        </div>
                        <img class="enemy-spell-image" style="width:320px;height:320px;" [style.background-color]="enemy.color"/>
                    </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="enemy-guide-container" *ngIf="hasGuide">
                guide will go here (Child component)
                <div class="phase">
                    <div class="enemy-overall">
                        If boss, overall and quick tips go here
                    </div>
                    <div class="enemy-spell-container">
                        the spells will go here with an ngFor
                        gif / description
                        cooldown with clock
                    </div>
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>